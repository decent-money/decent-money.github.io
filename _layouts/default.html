<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8">
    <title>{{ page.title | escape }} | {{ site.title | escape }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    {% if page.description %}
    <meta name="description" content="{{ page.description | escape }}">
    {% else %}
    <meta name="description" content="{{ site.description | escape }}">
    {% endif %}

    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  </head>
  <body>
<header class="site-header">
  <div class="container header-inner">
    <a class="brand-logo" href="{{ '/' | relative_url }}">
      <span class="brand-text">
        <span class="brand-title">DM2K9.net</span>
      </span>
    </a>
  </div>
</header>


    <main class="site-main">
      <div class="container">
        {{ content }}
      </div>
    </main>

<footer class="site-footer">
  <div class="container site-footer-inner">
    <div>¬© {{ site.time | date: "%Y" }} Decent Money</div>
    <div class="footer-lightning-wrap">
      <span class="footer-lightning-prefix">Tip/Zap:</span>
      <a id="lightningLink"
         class="footer-lightning"
         href="lightning:greyfox3@primal.net"
         data-ln="greyfox3@primal.net"
         rel="nofollow">‚ö° greyfox3@primal.net</a>
    </div>
    <div class="footer-links">
      <a href="https://decent-money.github.io/" target="_blank" rel="noopener">Mirror</a>
      <a href="https://github.com/decent-money" target="_blank" rel="noopener">GitHub</a>
      <a href="https://x.com/decentmoney2009" target="_blank" rel="noopener">ùïè</a>
      <a id="nostrCopyLink"
         href="#"
         title="Click/tap to copy npub"
         aria-label="npub10k0zrnsujm856xrvx7ftw2m66xsx39em620slh4eecympt5833pq97rf0x"
         data-npub="npub10k0zrnsujm856xrvx7ftw2m66xsx39em620slh4eecympt5833pq97rf0x">nostr</a>
    </div>
  </div>
</footer>

<script>
  (() => {
    const link = document.getElementById('nostrCopyLink');
    if (!link || !navigator.clipboard) return;
    const npub = link.dataset.npub;
    const original = link.textContent;
    let resetTimer;

    link.addEventListener('click', e => {
      e.preventDefault();
      navigator.clipboard.writeText(npub).then(() => {
        link.textContent = 'npub copied';
        clearTimeout(resetTimer);
        resetTimer = setTimeout(() => {
          link.textContent = original;
        }, 1200);
      });
    });
  })();

  (() => {
    const lnLink = document.getElementById('lightningLink');
    if (!lnLink) return;

    const addr = lnLink.dataset.ln;
    const original = lnLink.textContent;
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
      navigator.userAgent || ''
    );
    let resetTimer;

    lnLink.addEventListener('click', e => {
      e.preventDefault();
      const lightningUrl = `lightning:${addr}`;

      if (isMobile) {
        window.location.href = lightningUrl;
        return;
      }

      const showCopied = () => {
        lnLink.textContent = '‚ö° copied lightning address';
        clearTimeout(resetTimer);
        resetTimer = setTimeout(() => {
          lnLink.textContent = original;
        }, 1200);
      };

      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(addr).then(showCopied);
      } else {
        const textarea = document.createElement('textarea');
        textarea.value = addr;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        showCopied();
      }
    });
  })();
</script>
  </body>
</html>
